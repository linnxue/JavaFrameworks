## mybatis的入门

标签：mybatis

****

1. JDBC的劣势
   1. 代码繁琐
      1. 一阶段操作方法：
         1. 加载驱动
         2. 创建连接对象
            - 创建对象时要指定连接字符串、用户名、密码
      2. 二阶段操作方法
         - 把共性的东西提取成一个DButil，里边是获取连接对象和关闭相关对象
      3. 但是DAO中还有很多重复代码，例如
         1. 每个方法中都要获取连接，创建语句，问号赋值
         2. 查出result、set，一点点解析，然后给对象属性赋值
   2. 表关系维护复杂
      - 例如图书管理系统中，需要六表连接查询
      - 从表和字表之间的删除关系，例如删除学生需要先删除表中所有学生信息；添加一个学生信息需要表中先存在一个学生
      - 数据库中用外键关联表和表，多对一的类中在多的一端加一的一端的数据类型
   3. 硬编码
      - 例如多条件查询，要做多重判断、循环
   4. 性能问题
      - 初期还没有考虑性能问题，但是后期数据量巨大，需要考虑程序的性能问题
   
2. ORM框架——对象关系模型
  
   1. 把数据库中的某一张表和poji中的javabean做了相应的关系，加快开发。
   2. 对象关系映射（模型）
      1. 常用的模型
         - mybatis
         - hibernate
   3. Hibernate和MyBatis区别
      - 全自动和半自动
      - 独有HQL语句，`from`类名，封装性好，效率较差
      - 自己写SQL语句，MyBatis框架把poji中的javabean相关联，编码量较大
   
3. Mybatis简介

   - 2010由ibatis迁移后改名为mybatis
   - 支持动态列，动态表名。
   - 后续学习ORACLE会学习执行存储过程、触发器等
   - 提供一级或二级缓存，提高执行效率，避免反复开启数据库

4. 框架特点

   - 简单易学
   - 灵活：动态生成sql文，自动管理多表关系
   - 解除sql与程代码的耦合
   - 提供大量标签用于动态生成sql文

5. 功能架构
   1. 基于注解（改源码）和基于sql配置
      1. 接口层（主要编写）
      2. 数据处理层
         - 结果处理和映射中可能有一些特殊类型需要我们手动转换
      3. 框架支撑层（主要编写）
   2. 基于注解
      - 可视性可读性很高，可以明确方法和sql语句的对应关系
   3. 基于配置文件
      - 往往用于大型项目，便于经常维护
   4. 框架中基于连接池的管理和缓存机制

   | ****API接口层****  | 提供给外部使用的接口API，开发人员通过这些API来操纵数据库     |
   | -------------------- | ------------------------------------------------------------ |
   | ****数据处理层**** | 负责具体的SQL查找、SQL解析、SQL执行和执行结果映射处理等。它主要的功能是根据调用的请求完成一次数据库操作 |
   | ****基础支撑层**** | 负责最基础的功能支撑，包括连接管理、事务管理、配置加载、缓存处理等，MyBatis将这些共用的功能抽取出来作为最基础的组件，为上层的数据处理层提供支持 |

